import e from"vue";import{h as t,createApp as r}from"vue3";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=function(){};var i=/\B([A-Z])/g,s=/^on[A-Z]/,u=/(Once|Passive|Capture)$/,a={Once:"~",Passive:"&",Capture:"!"};var c={props:["parent","vnode"],mounted:function(){var e=this;this.vue3App=r({render:function(){return e.vnode()}}),this.vue3App._context.provides=this.parent._.provides;var t,n=this.$el;this.vue3App.mount((t=n,{insertBefore:function(e,r){return t.parentNode.insertBefore(e,r||t)},removeAttribute:o,setAttribute:o})),n.remove()},destroyed:function(){this.vue3App.unmount()},render:function(e){return e("div")}};function v(e,t){var r={},n=function(n){r[n]=function(){return e(c,{attrs:{parent:t,vnode:t.$slots[n]}})}};for(var o in t.$slots)n(o);return r}var p={configurable:!0},d={created:function(){if(!(e=this)._||!e._.uid)throw new Error("toVue3 must be used to mount a component in a Vue 3 app");var e;this.v2=void 0},mounted:function(){var t=this,r=this,o=this.$el;this.v2=new e({provide:function(){return new Proxy(r._.provides,{getOwnPropertyDescriptor:function(e,t){if(t in e)return p}})},render:function(e){return e(r.$options.component,n({},function(e){var t={style:void 0,class:void 0,on:{},attrs:{},props:{}},r=t.on,n=t.attrs;for(var o in e)if(s.test(o)){var c=o.slice(2);if(u.test(c)){for(var v=void 0;v=c.match(u);)c=a[v[0]]+c.slice(0,-v[0].length);c=c.replace("!~","~!")}r[c=c.replace(i,"-$1").toLowerCase()]=e[o]}else"class"===o||"style"===o?t[o]=e[o]:n[o]=e[o];return t}(r.$attrs),{scopedSlots:v(e,r)}))},mounted:function(){for(var e,t,n=r._,i=n.vnode.el;n.vnode.el===i;)n.vnode.el=this.$el,n.parent&&(n=n.parent);e=o,t=this.$el.parentNode,Object.defineProperty(e,"parentNode",{get:function(){return this.parentElement||t}})},destroyed:function(){this.$el.replaceWith(o)},methods:{exposeProvided:function(e){return Object.assign(t._.provides,e)}},el:o})},beforeUnmount:function(){this.v2.$destroy()},render:function(){return this.v2&&this.v2.$forceUpdate(),t("div")}},f={created:function(){this.$root.exposeProvided(this._provided)}};export default function(e){var t=Object.create(e);t.mixins=[f].concat(e.mixins||[]);var r=Object.create(d);return r.component=t,r}
