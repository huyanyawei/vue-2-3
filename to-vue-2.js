!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue"),require("vue3")):"function"==typeof define&&define.amd?define(["vue","vue3"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).toVue2=t(e.Vue,e.Vue3)}(this,(function(e,t){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=r(e),i=Symbol();function o(e,t){e[i]||(e[i]=t,Object.defineProperty(e,"parentNode",{get:function(){return this[i]||this.parentElement}}))}var a=function(e,t){var r=e.splice(0);t.append.apply(t,r),r.forEach((function(e){e[i]=void 0}))};function s(e,t){if(this.frag){var r=this.frag.indexOf(t);r>-1&&this.frag.splice(r,0,e)}if(this[u]){var n=this[u].get(t);n&&(t=n[0])}t.before(e),o(e,this)}function f(e){if(this.frag){var t=this.frag.indexOf(e);t>-1&&this.frag.splice(t,1)}var r=this[u];if(r){var n=r.get(e);if(n)return a(n,e),r.delete(e),void(e[i]=void 0)}e.remove()}var u=Symbol(),c={insertBefore:s,removeChild:f},p=Symbol(),d={insertBefore:s,before:function(e){this.frag[0].before(e)},remove:function(){var e=this[p],t=this.frag,r=t.splice(0,t.length,e);r[0].before(this[p]),r.forEach((function(e){return e.remove()}))},removeChild:f,appendChild:function(e){var t=this.frag.length;this.frag[t-1].after(e);var r=this[p];this.frag[0]===r&&(this.frag.splice(0,1),r.remove()),o(e,this),this.frag.push(e)}},v={inserted:function(e){var t=Array.from(e.childNodes),r=e.parentNode,n=document.createComment("");e[p]=n,0===t.length&&t.push(n);var i=document.createDocumentFragment();i.append.apply(i,t),e.replaceWith(i),e.frag=t,function(e,t,r){e[u]||(e[u]=new Map,Object.assign(e,c)),e[u].set(t,r)}(r,e,t),o(e,r),t.forEach((function(t){return o(t,e)})),Object.defineProperty(e,"innerHTML",{set:function(t){var r=document.createElement("div");r.innerHTML=t;var n=e.frag.length;Array.from(r.childNodes).forEach((function(t){return e.appendChild(t)})),r.append.apply(r,e.frag.splice(0,n))},get:function(){return""}}),Object.assign(e,d)},unbind:function(e){a(e.frag,e),e[p].remove()}},h=function(){};var l=/-(\w)/g;var m={props:["parent","vnode"],created:function(){this.vue2App=void 0},mounted:function(){var e=this,t=this;this.vue2App=new n.default({beforeCreate:function(){this.$parent=t.parent},directives:{frag:v},render:function(t){return t("div",{directives:[{name:"frag"}]},[e.vnode()])},el:this.$el})},beforeUnmount:function(){this.vue2App.$destroy()},render:function(){return this.vue2App&&this.vue2App.$forceUpdate(),t.h("div")}};function g(e,t){for(var r=e;r;){if(r._provided&&r._provided[t])return r._provided[t];r=r.$parent}}var b={inheritAttrs:!1,beforeCreate:function(){if(!(e=this)._uid||!e._isVue)throw new Error("toVue2 must be used to mount a component in a Vue 2 app");var e},provide:function(){return{}},mounted:function(){var e=this,r=this;this.v3app=t.createApp({render:function(){return t.h(e.$options.component,function(e){var t,r=e.$attrs,n=e.$listeners,i=e.$vnode.data,o=Object.assign({},r);for(var a in(i.class||i.staticClass)&&(o.class=[i.class,i.staticClass]),(i.style||i.staticStyle)&&(o.style=[i.style,i.staticStyle]),n)o[(t=a,"&"===t[0]&&(t=t.slice(1)+"Passive"),"~"===t[0]&&(t=t.slice(1)+"Once"),"!"===t[0]&&(t=t.slice(1)+"Capture"),"on"+(t[0].toUpperCase()+t.slice(1).replace(l,(function(e,t){return t?t.toUpperCase():""}))))]=n[a];return o}(e),function(e){var r={},n=function(n){r[n]=function(){return t.h(m,{parent:e,vnode:e.$scopedSlots[n]})}};for(var i in e.$scopedSlots)n(i);return r}(e))},mounted:function(){var e=this;r.v3forceUpdate=function(){return e.$forceUpdate()},r.v3=this._.subTree.component.proxy}}),this.v3app._context.provides=new Proxy({},{has:function(t,r){return g(e,r)},get:function(t,r){return g(e,r)},set:function(t,r,n){return e._provided[r]=n,!0}});var n,i=this.$el,o=this.v3app.mount((n=i,{insertBefore:function(e,t){return n.parentNode.insertBefore(e,t||n)},removeAttribute:h,setAttribute:h}));this.$el=o.$el,i.remove()},beforeDestroy:function(){this.v3app.unmount()},render:function(e){return this.v3forceUpdate&&this.v3forceUpdate(),e("div")}};return function(e){var t=Object.create(b);return t.component=e,t}}));
