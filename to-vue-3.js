!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue"),require("vue3")):"function"==typeof define&&define.amd?define(["vue","vue3"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).toVue3=t(e.Vue,e.Vue3)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(e);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=function(){};var u=/\B([A-Z])/g,s=/^on[A-Z]/,a=/(Once|Passive|Capture)$/,c={Once:"~",Passive:"&",Capture:"!"};var d={props:["parent","vnode"],mounted:function(){var e=this;this.vue3App=t.createApp({render:function(){return e.vnode()}}),this.vue3App._context.provides=this.parent._.provides;var n,r=this.$el;this.vue3App.mount((n=r,{insertBefore:function(e,t){return n.parentNode.insertBefore(e,t||n)},removeAttribute:i,setAttribute:i})),r.remove()},destroyed:function(){this.vue3App.unmount()},render:function(e){return e("div")}};function f(e,t){var n={},r=function(r){n[r]=function(){return e(d,{attrs:{parent:t,vnode:t.$slots[r]}})}};for(var o in t.$slots)r(o);return n}var p={configurable:!0},v={created:function(){if(!(e=this)._||!e._.uid)throw new Error("toVue3 must be used to mount a component in a Vue 3 app");var e;this.v2=void 0},mounted:function(){var e=this,t=this,n=this.$el;this.v2=new r.default({provide:function(){return new Proxy(t._.provides,{getOwnPropertyDescriptor:function(e,t){if(t in e)return p}})},render:function(e){return e(t.$options.component,o({},function(e){var t={style:void 0,class:void 0,on:{},attrs:{},props:{}},n=t.on,r=t.attrs;for(var o in e)if(s.test(o)){var i=o.slice(2);if(a.test(i)){for(var d=void 0;d=i.match(a);)i=c[d[0]]+i.slice(0,-d[0].length);i=i.replace("!~","~!")}n[i=i.replace(u,"-$1").toLowerCase()]=e[o]}else"class"===o||"style"===o?t[o]=e[o]:r[o]=e[o];return t}(t.$attrs),{scopedSlots:f(e,t)}))},mounted:function(){for(var e,r,o=t._,i=o.vnode.el;o.vnode.el===i;)o.vnode.el=this.$el,o.parent&&(o=o.parent);e=n,r=this.$el.parentNode,Object.defineProperty(e,"parentNode",{get:function(){return this.parentElement||r}})},destroyed:function(){this.$el.replaceWith(n)},methods:{exposeProvided:function(t){return Object.assign(e._.provides,t)}},el:n})},beforeUnmount:function(){this.v2.$destroy()},render:function(){return this.v2&&this.v2.$forceUpdate(),t.h("div")}},l={created:function(){this.$root.exposeProvided(this._provided)}};return function(e){var t=Object.create(e);t.mixins=[l].concat(e.mixins||[]);var n=Object.create(v);return n.component=t,n}}));
